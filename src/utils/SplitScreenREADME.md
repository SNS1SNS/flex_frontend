# Система разделения экрана для отчетов

Система разделения экрана позволяет пользователям создавать сложные макеты для просмотра нескольких отчетов одновременно. Она поддерживает как горизонтальное, так и вертикальное разделение, а также вложенные разделения.

## Основные возможности

- Динамическое разделение экрана (горизонтально или вертикально)
- Вложенное разделение (можно разделить уже разделенную секцию)
- Создание отчетов в каждой секции
- Изменение размеров секций с помощью перетаскивания
- Закрытие секций и автоматическое объединение оставшихся
- Сохранение макета для последующего использования

## Как использовать

### Активация режима разделения экрана

1. Нажмите на кнопку разделения экрана (2 или 4 секции) в верхней панели
2. Система активирует режим разделения и создаст начальный контейнер

### Разделение контейнера

1. Щелкните на контейнер, чтобы сделать его активным
2. Используйте кнопки "Разделить горизонтально" (⬍) или "Разделить вертикально" (⬌) в верхнем правом углу контейнера
3. Система разделит контейнер на две секции
4. Если в контейнере уже был отчет, он будет перемещен в первую секцию
5. Откроется диалог выбора отчета для второй секции

### Выбор отчета для секции

1. В модальном окне выберите тип отчета из доступных категорий
2. Отчет будет создан и добавлен в секцию
3. Можно продолжить разделение любой из секций для создания более сложных макетов

### Изменение размера секций

1. Наведите курсор на разделитель между секциями
2. Курсор изменится на индикатор изменения размера (↔ или ↕)
3. Нажмите и перетащите разделитель для изменения размеров секций

### Закрытие секции

1. Нажмите на кнопку закрытия (×) в правом верхнем углу секции
2. Секция будет удалена, а ее "братская" секция расширится, заполнив освободившееся пространство
3. Если закрывается последняя секция, будет восстановлен исходный макет

### Выход из режима разделения экрана

1. Нажмите кнопку "Выйти из режима разделения" в нижней части экрана
2. Система вернется к обычному режиму отображения с одним отчетом

## Технические детали

Система разделения экрана реализована с использованием следующих технологий:

- JavaScript ES6+ для логики управления
- CSS Flexbox для макетов контейнеров
- React для отрисовки компонентов отчетов
- Событийная архитектура для обмена данными между компонентами

Система предусматривает сохранение и восстановление макетов, что позволяет пользователям создать сложный макет один раз и затем быстро вернуться к нему.

## Интеграция с компонентами отчетов

Все компоненты отчетов адаптированы для работы в режиме разделения экрана. В этом режиме некоторые управляющие элементы (например, селекторы периода) скрываются, чтобы максимально использовать доступное пространство. Управление периодом и выбранным транспортным средством осуществляется глобально из основной панели управления.

## Производительность

Для обеспечения высокой производительности при работе с множеством отчетов одновременно:

1. Отчеты создаются только при необходимости
2. Неактивные отчеты могут быть временно приостановлены для экономии ресурсов
3. Система использует ленивую загрузку данных
4. Визуализация оптимизирована для минимизации перерисовок 